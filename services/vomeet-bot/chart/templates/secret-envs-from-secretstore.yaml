{{- /*
  ExternalSecret for Kubernetes SecretStore integration.
  
  TODO: Add your Kubernetes secret references to the data section.
  Example:
    data:
      - secretKey: REDIS_URL
        remoteRef:
          key: redis-credentials  # Kubernetes Secret name
          property: url           # Key in the secret
      - secretKey: WHISPER_LIVE_URL
        remoteRef:
          key: whisperlive-credentials
          property: url
*/}}
{{- if and .Values.externalSecrets.enabled .Values.externalSecrets.secretstore.enabled -}}
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: envs-from-secretstore
  labels:
    {{- include "vomeet-bot.labels" . | nindent 4 }}
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: {{ include "vomeet-bot.fullname" . }}-secretstore
    kind: SecretStore
  target:
    name: envs-from-secretstore
    creationPolicy: Owner
  data: []
{{- end }}
