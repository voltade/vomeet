{{- /*
  Image pull secrets for private registries.
  
  Option 1: Provide dockerconfigjson directly in values (not recommended for production)
  Option 2: Use External Secrets (recommended - see envoy-crm for example)
  
  If using External Secrets, disable this by not setting imagePullSecrets.dockerconfigjson
*/}}
{{- $dockerconfig := "" }}
{{- if .Values.imagePullSecrets }}
{{- $firstSecret := index .Values.imagePullSecrets 0 }}
{{- if $firstSecret }}
{{- $dockerconfig = index $firstSecret "dockerconfigjson" | default "" }}
{{- end }}
{{- end }}
{{- if $dockerconfig }}
apiVersion: v1
kind: Secret
metadata:
  name: image-pull-secrets
  labels:
    {{- include "vomeet-bot.labels" . | nindent 4 }}
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: {{ $dockerconfig | b64enc | quote }}
{{- end }}
